{
    "uid": "65C4214A2B674749414827D148BC72E75573",
    "lastModificationTime": 0,
    "items": {
        "name": "SRD_SuperMessageEditor",
        "type": "script",
        "parentId": "1A3009B764B23644486B7AF20E8565E62030",
        "order": 0,
        "content": "LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqDQogKiBTdXBlciBNZXNzYWdlIEVkaXRvcg0KICogDQogKiBWTk0gRWRpdG9yIEphdmFTY3JpcHQgRmlsZQ0KICoNCiAqIGJ5IFJvYmVydCBCb3JnaGVzZSAoU3VtUm5kbURkZSkNCiAqIA0KICogDQogKiBUaGlzIGV4dGVuc2lvbiB1c2VzIENLRWRpdG9yLCB3aGljaCBpcyBsaXNjZW5lZCANCiAqIHVuZGVyIEdQTC4gTW9yZSBpbmZvcm1hdGlvbiBtYXkgYmUgZm91bmQgaGVyZToNCiAqIGh0dHBzOi8vY2tlZGl0b3IuY29tL2xlZ2FsL2NrZWRpdG9yLW9zcy1saWNlbnNlLw0KICoNCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQp2YXIgZ2xvYmFsID0gdGhpcy53aW5kb3cgfHwgc2VsZjsNCg0KZ2xvYmFsLlNSRCA9IGdsb2JhbC5TUkQgfHwge307DQpTUkQuU3VwZXJNZXNzYWdlRWRpdG9yID0gU1JELlN1cGVyTWVzc2FnZUVkaXRvciB8fCB7fTsNClNSRC5TdXBlck1lc3NhZ2VFZGl0b3IuX3ZlcnNpb24gPSAnMS4wLjAnOw0KDQooZnVuY3Rpb24oXykgew0KDQp2YXIgZnMgPSByZXF1aXJlTm9kZSgnZnMnKTsNCnZhciBwYXRoID0gcmVxdWlyZU5vZGUoJ3BhdGgnKTsNCg0KXy5kYXRhUGF0aCA9IHBhdGguam9pbihudy5BcHAuZGF0YVBhdGgsICdTdW1SbmRtRGRlIEV4dGVuc2lvbnMnKTsNCl8uZmlsZVBhdGggPSBwYXRoLmpvaW4oXy5kYXRhUGF0aCwgJ1N1cGVyTWVzc2FnZUVkaXRvcl8nICsgXy5fdmVyc2lvbi5yZXBsYWNlKC9cLi9nLCAnXycpICsgJy5odG1sJyk7DQoNCmlmKCFmcy5leGlzdHNTeW5jKF8uZGF0YVBhdGgpKSB7DQoJZnMubWtkaXJTeW5jKF8uZGF0YVBhdGgpOw0KfQ0KDQppZighZnMuZXhpc3RzU3luYyhfLmZpbGVQYXRoKSkgew0KCWZzLndyaXRlRmlsZVN5bmMoXy5maWxlUGF0aCwgYDwhRE9DVFlQRSBodG1sPg0KPGh0bWw+DQo8aGVhZD4NCjwvaGVhZD4NCjxib2R5Pg0KCTxzdHlsZT4NCgkJI21vZGFsIHsNCgkJCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgkJCWxlZnQ6IDEwcHg7DQoJCQl0b3A6IDE1cHg7DQoJCX0NCg0KCQlpZnJhbWUgew0KCQkJZm9udC1zaXplOiA0MHB4Ow0KCQl9DQoJPC9zdHlsZT4NCgk8c2NyaXB0IHNyYz0iaHR0cDovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjEwLjIvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+DQoJPHNjcmlwdCBzcmM9Imh0dHA6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvY2tlZGl0b3IvNC4yL2NrZWRpdG9yLmpzIj48L3NjcmlwdD4NCgk8c2NyaXB0IHNyYz0iaHR0cDovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9ja2VkaXRvci80LjIvYWRhcHRlcnMvanF1ZXJ5LmpzIj48L3NjcmlwdD4NCgk8dGV4dGFyZWEgaWQ9ImVkaXRQbGFjZSI+PC90ZXh0YXJlYT4NCgk8c2NyaXB0Pg0KCQlpZighd2luZG93LmpRdWVyeSkgew0KCQkNCgkJCXZhciB0ZXh0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0UGxhY2UnKTsNCgkJCXRleHRBcmVhLnN0eWxlLndpZHRoID0gIjEwMCUiOw0KCQkJdGV4dEFyZWEuaW5uZXJIVE1MID0gIkludGVybmV0IGFjY2VzcyByZXF1aXJlZCBmb3IgdGhlIFN1cGVyIE1lc3NhZ2UgRWRpdG9yISI7DQoJCQ0KCQl9IGVsc2Ugew0KCQkNCgkJCWZ1bmN0aW9uIHByZXBhcmVUb0Nsb3NlKCkgew0KCQkJCXRoaXMuX21vZGlmaWVyLm1lc3NhZ2UgPSB0cmFuc2Zvcm0oKTsNCgkJCX0NCgkJCQ0KCQkJZnVuY3Rpb24gYXR0ZW1wdFJlZnJlc2goKSB7DQoJCQkJdmFyIGVkaXRvciA9IENLRURJVE9SLmluc3RhbmNlc1snZWRpdFBsYWNlJ107DQoJCQkJdmFyIHByZXNzdXJlID0gMDsNCgkJCQl2YXIgdXBkYXRlU3R5bGUgPSBmdW5jdGlvbigpIHsNCgkJCQkJaWYoZWRpdG9yLmRvY3VtZW50ICYmIGVkaXRvci5kb2N1bWVudC4kICYmIGVkaXRvci5kb2N1bWVudC4kLmJvZHkpIHsNCgkJCQkJCWVkaXRvci5kb2N1bWVudC4kLmJvZHkuc3R5bGUud2lkdGggPSAiNjAwcHgiOw0KCQkJCQkJZWRpdG9yLmRvY3VtZW50LiQuYm9keS5zdHlsZS5oZWlnaHQgPSAiMzAzcHgiOw0KCQkJCQkJZWRpdG9yLmRvY3VtZW50LiQuYm9keS5zdHlsZS5tYXJnaW4gPSAiMCI7DQoJCQkJCQllZGl0b3IuZG9jdW1lbnQuJC5ib2R5LnN0eWxlLnBhZGRpbmcgPSAiMTBweCAxMHB4IDEwcHggMTBweCI7DQoJCQkJCQlpZih0aGlzLl9tb2RpZmllci5tZXNzYWdlKSB7DQoJCQkJCQkJaWYodHlwZW9mKHRoaXMuX21vZGlmaWVyLm1lc3NhZ2UpID09PSAic3RyaW5nIikgew0KCQkJCQkJCQllZGl0b3Iuc2V0RGF0YSh0cmFuc2Zvcm1CYWNrKHRoaXMuX21vZGlmaWVyLm1lc3NhZ2UpKTsNCgkJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCQllZGl0b3Iuc2V0RGF0YSh0cmFuc2Zvcm1CYWNrKHRoaXMuX21vZGlmaWVyLm1lc3NhZ2UuZGVmYXVsdFRleHQpKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCQljb25zb2xlLmxvZygiRWRpdG9yIHN0eWxlIG1vZGlmaWVkIHN1Y2Nlc3NmdWxseSEiKTsNCgkJCQkJfSBlbHNlIHsNCgkJCQkJCWlmKHByZXNzdXJlKysgPiAxMCkgew0KCQkJCQkJCWNvbnNvbGUubG9nKCJDb3VsZCBub3QgbW9kaWZ5IGVkaXRvciBzdHlsZS4iKTsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJc2V0VGltZW91dCh1cGRhdGVTdHlsZSwgMjAwKTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQlzZXRUaW1lb3V0KHVwZGF0ZVN0eWxlLCAyMDApOw0KCQkJfQ0KCQkNCgkJCSQoJyNlZGl0UGxhY2UnKS5ja2VkaXRvcih7DQoJCQkJd2lkdGg6ICIxMDAlIiwNCgkJCQloZWlnaHQ6ICIzMjNweCIsDQoJCQkJZW50ZXJNb2RlOiAyLA0KCQkJCXJlc2l6ZV9lbmFibGVkOiBmYWxzZSwNCgkJCQl0b29sYmFyR3JvdXBzOiBbDQoJCQkJCXsgbmFtZTogJ2Jhc2ljc3R5bGVzJywgZ3JvdXBzOiBbICdiYXNpY3N0eWxlcycsICdjbGVhbnVwJyBdIH0sDQoJCQkJCXsgbmFtZTogJ3BhcmFncmFwaCcsIGdyb3VwczogWyAnbGlzdCcsICdibG9ja3MnLCAnYWxpZ24nLCAnYmlkaScsICdwYXJhZ3JhcGgnIF0gfSwNCgkJCQkJeyBuYW1lOiAnY29sb3JzJywgZ3JvdXBzOiBbICdjb2xvcnMnIF0gfSwNCgkJCQkJeyBuYW1lOiAnc3R5bGVzJywgZ3JvdXBzOiBbICdzdHlsZXMnIF0gfSwNCgkJCQkJeyBuYW1lOiAnZG9jdW1lbnQnLCBncm91cHM6IFsgJ21vZGUnLCAnZG9jdW1lbnQnLCAnZG9jdG9vbHMnIF0gfSwNCgkJCQkJeyBuYW1lOiAnY2xpcGJvYXJkJywgZ3JvdXBzOiBbICdjbGlwYm9hcmQnLCAndW5kbycgXSB9LA0KCQkJCQl7IG5hbWU6ICdlZGl0aW5nJywgZ3JvdXBzOiBbICdmaW5kJywgJ3NlbGVjdGlvbicsICdlZGl0aW5nJyBdIH0sDQoJCQkJCXsgbmFtZTogJ2Zvcm1zJywgZ3JvdXBzOiBbICdmb3JtcycgXSB9LA0KCQkJCQl7IG5hbWU6ICdpbnNlcnQnLCBncm91cHM6IFsgJ2luc2VydCcgXSB9LA0KCQkJCQl7IG5hbWU6ICd0b29scycsIGdyb3VwczogWyAndG9vbHMnIF0gfSwNCgkJCQkJeyBuYW1lOiAnb3RoZXJzJywgZ3JvdXBzOiBbICdvdGhlcnMnIF0gfSwNCgkJCQkJeyBuYW1lOiAnYWJvdXQnLCBncm91cHM6IFsgJ2Fib3V0JyBdIH0NCgkJCQldLA0KCQkJCXJlbW92ZVBsdWdpbnM6ICdsaXN0c3R5bGUsdGFibGV0b29scyxzY2F5dCxtZW51YnV0dG9uLGNvbnRleHRtZW51JywNCgkJCQlyZW1vdmVCdXR0b25zOiAnU291cmNlLFNhdmUsTmV3UGFnZSxQcmV2aWV3LFByaW50LFRlbXBsYXRlcyxGb3JtLENoZWNrYm94LFJhZGlvLFRleHRGaWVsZCxUZXh0YXJlYSxTZWxlY3QsQnV0dG9uLEhpZGRlbkZpZWxkLEltYWdlQnV0dG9uLFN1YnNjcmlwdCxTdXBlcnNjcmlwdCxOdW1iZXJlZExpc3QsQnVsbGV0ZWRMaXN0LE91dGRlbnQsQ3JlYXRlRGl2LEp1c3RpZnlMZWZ0LEJsb2NrcXVvdGUsSnVzdGlmeVJpZ2h0LEp1c3RpZnlDZW50ZXIsSnVzdGlmeUJsb2NrLExhbmd1YWdlLEJpZGlSdGwsQmlkaUx0cixBbmNob3IsSW1hZ2UsRmxhc2gsVGFibGUsSG9yaXpvbnRhbFJ1bGUsU21pbGV5LFNwZWNpYWxDaGFyLFBhZ2VCcmVhayxJZnJhbWUsU3R5bGVzLEZvcm1hdCxGb250LE1heGltaXplLEFib3V0LFNob3dCbG9ja3MsQmFja2dyb3VuZCcNCgkJCX0pOw0KCQ0KCQkJZnVuY3Rpb24gdHJhbnNmb3JtKCkgew0KCQkJCXZhciByZXN1bHQgPSBqUXVlcnkoJyNlZGl0UGxhY2UnKS52YWwoKTsNCgkNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCc8YnIgLz4nLCAnZycpLCAnJyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPHN0cm9uZz4nLCAnZycpLCAne1k6Qn0nKTsNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCc8L3N0cm9uZz4nLCAnZycpLCAne1k6TkJ9Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPHU+JywgJ2cnKSwgJ3tZOlV9Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPC91PicsICdnJyksICd7WTpOVX0nKTsNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCc8ZW0+JywgJ2cnKSwgJ3tZOkl9Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPC9lbT4nLCAnZycpLCAne1k6Tkl9Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPHM+JywgJ2cnKSwgJ3tZOlN9Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnPC9zPicsICdnJyksICd7WTpOU30nKTsNCgkNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCcmbmJzcDsnLCAnZycpLCAnICcpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJyZhbXA7JywgJ2cnKSwgJyYnKTsNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCcmIzM5OycsICdnJyksICdcXCcnKTsNCgkJCQkNCgkJCQl2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCc8c3BhbiBzdHlsZT0iKFteIl0qKSI+KFtePF0qKTwvc3Bhbj4nLCAnZycpOw0KCQkJCXdoaWxlKHJlc3VsdC5tYXRjaChyZWdleCkpIHsNCgkJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UocmVnZXgsIGZ1bmN0aW9uKG0sIHAxLCBwMikgew0KCQkJCQkJaWYocDEuc3Vic3RyaW5nKDAsIDEwKSA9PT0gJ2ZvbnQtc2l6ZTonKSB7DQoJCQkJCQkJcmV0dXJuICc9LT1zaXplICcgKyBwMS5zdWJzdHJpbmcoMTApICArICc9LT0nICsgcDIgKyAnPS09L3NpemU9LT0nOw0KCQkJCQkJfSBlbHNlIGlmKHAxLnN1YnN0cmluZygwLCA2KSA9PT0gJ2NvbG9yOicpIHsNCgkJCQkJCQlyZXR1cm4gJz0tPWNvbG9yICcgKyBwMS5zdWJzdHJpbmcoNikgKyAnPS09JyArIHAyICsgJz0tPS9jb2xvcj0tPSc7DQoJCQkJCQl9DQoJCQkJCQlyZXR1cm4gJz0tPWJhY2sgJyArIHAxLnN1YnN0cmluZygxNykgKyAnPS09JyArIHAyICsgJz0tPS9iYWNrPS09JzsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJCQ0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJyZsdDsnLCAnZycpLCAnPCcpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJyZndDsnLCAnZycpLCAnPicpOw0KCQ0KCQkJCXZhciBtclN0YWNrID0gW107DQoJDQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnKD86KD86PS09c2l6ZSAoW149XSopcHg9LT0pfCg/Oj0tPS9zaXplPS09KSknLCAnZycpLCBmdW5jdGlvbihtLCBwMSkgew0KCQkJCQlpZihtID09PSAnPS09L3NpemU9LT0nKSB7DQoJCQkJCQltclN0YWNrLnBvcCgpOw0KCQkJCQkJaWYobXJTdGFjay5sZW5ndGggPT09IDApIHsNCgkJCQkJCQlyZXR1cm4gJ3tTWjowfSc7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCXJldHVybiAne1NaOicgKyBtclN0YWNrW21yU3RhY2subGVuZ3RoIC0gMV0gKyAnfSc7DQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQlwMSA9IFN0cmluZyhwYXJzZUludChwMSkgKyAxNik7DQoJCQkJCQltclN0YWNrLnB1c2gocDEpOw0KCQkJCQkJcmV0dXJuICd7U1o6JyArIHAxICsgJ30nOw0KCQkJCQl9DQoJCQkJfSk7DQoJDQoJCQkJbXJTdGFjayA9IFtdOw0KCQ0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJyg/Oig/Oj0tPWNvbG9yIChbXj1dKik9LT0pfCg/Oj0tPS9jb2xvcj0tPSkpJywgJ2cnKSwgZnVuY3Rpb24obSwgcDEpIHsNCgkJCQkJaWYobSA9PT0gJz0tPS9jb2xvcj0tPScpIHsNCgkJCQkJCW1yU3RhY2sucG9wKCk7DQoJCQkJCQlpZihtclN0YWNrLmxlbmd0aCA9PT0gMCkgew0KCQkJCQkJCXJldHVybiAne0NDOjB9JzsNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJcmV0dXJuICd7Q0M6JyArIG1yU3RhY2tbc2l6ZVN0YWNrLmxlbmd0aCAtIDFdICsgJ30nOw0KCQkJCQkJfQ0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJbXJTdGFjay5wdXNoKHAxKTsNCgkJCQkJCXJldHVybiAne0NDOicgKyBwMSArICd9JzsNCgkJCQkJfQ0KCQkJCX0pOw0KCQ0KCQkJCW1yU3RhY2sgPSBbXTsNCgkNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCcoPzooPzo9LT1iYWNrIChbXj1dKik9LT0pfCg/Oj0tPS9iYWNrPS09KSknLCAnZycpLCBmdW5jdGlvbihtLCBwMSkgew0KCQkJCQlpZihtID09PSAnPS09L2JhY2s9LT0nKSB7DQoJCQkJCQltclN0YWNrLnBvcCgpOw0KCQkJCQkJaWYobXJTdGFjay5sZW5ndGggPT09IDApIHsNCgkJCQkJCQlyZXR1cm4gJ3tCQzowfSc7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCXJldHVybiAne0JDOicgKyBtclN0YWNrW3NpemVTdGFjay5sZW5ndGggLSAxXSArICd9JzsNCgkJCQkJCX0NCgkJCQkJfSBlbHNlIHsNCgkJCQkJCW1yU3RhY2sucHVzaChwMSk7DQoJCQkJCQlyZXR1cm4gJ3tCQzonICsgcDEgKyAnfSc7DQoJCQkJCX0NCgkJCQl9KTsNCgkNCgkJCQlyZXR1cm4gcmVzdWx0Ow0KCQkJfQ0KCQ0KCQkJZnVuY3Rpb24gdHJhbnNmb3JtQmFjayhzdHIpIHsNCgkJCQl2YXIgcmVzdWx0ID0gc3RyOw0KDQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxuJywgJ2cnKSwgJzxiciAvPlxcbicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOkJ9JywgJ2cnKSwgJzxzdHJvbmc+Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgne1k6TkJ9JywgJ2cnKSwgJzwvc3Ryb25nPicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOlV9JywgJ2cnKSwgJzx1PicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOk5VfScsICdnJyksICc8L3U+Jyk7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgne1k6SX0nLCAnZycpLCAnPGVtPicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOk5JfScsICdnJyksICc8L2VtPicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOlN9JywgJ2cnKSwgJzxzPicpOw0KCQkJCXJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoJ3tZOk5TfScsICdnJyksICc8L3M+Jyk7DQoJDQoJCQkJdmFyIHJjb3VudCA9IDA7DQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnXHtDQzooW15cfV0qKVx9JywgJ2cnKSwgZnVuY3Rpb24obSwgcDEpIHsNCgkJCQkJaWYocDEgPT09ICIwIikgew0KCQkJCQkJcmNvdW50LS07DQoJCQkJCQlyZXR1cm4gJzwvc3Bhbj4nOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJcmNvdW50Kys7DQoJCQkJCQlyZXR1cm4gJzxzcGFuIHN0eWxlPSJjb2xvcjonICsgcDEgKyAnIj4nOw0KCQkJCQl9DQoJCQkJfSk7DQoJDQoJCQkJZm9yKHZhciBpID0gMDsgaSA8IHJjb3VudDsgaSsrKSB7DQoJCQkJCXJlc3VsdCArPSAnPC9zcGFuPic7DQoJCQkJfQ0KCQ0KCQkJCXJjb3VudCA9IDA7DQoJDQoJCQkJcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cCgnXHtCQzooW15cfV0qKVx9JywgJ2cnKSwgZnVuY3Rpb24obSwgcDEpIHsNCgkJCQkJaWYocDEgPT09ICIwIikgew0KCQkJCQkJcmNvdW50LS07DQoJCQkJCQlyZXR1cm4gJzwvc3Bhbj4nOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJcmNvdW50Kys7DQoJCQkJCQlyZXR1cm4gJzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOicgKyBwMSArICciPic7DQoJCQkJCX0NCgkJCQl9KTsNCgkNCgkJCQlmb3IodmFyIGkgPSAwOyBpIDwgcmNvdW50OyBpKyspIHsNCgkJCQkJcmVzdWx0ICs9ICc8L3NwYW4+JzsNCgkJCQl9DQoJDQoJCQkJcmNvdW50ID0gMDsNCgkNCgkJCQlyZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKCdce1NaOihbXlx9XSopXH0nLCAnZycpLCBmdW5jdGlvbihtLCBwMSkgew0KCQkJCQlpZihwMSA9PT0gIjAiKSB7DQoJCQkJCQlyY291bnQtLTsNCgkJCQkJCXJldHVybiAnPC9zcGFuPic7DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQlyY291bnQrKzsNCgkJCQkJCXAxID0gU3RyaW5nKHBhcnNlSW50KHAxKSAtIDE2KTsNCgkJCQkJCXJldHVybiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTonICsgcDEgKyAncHgiPic7DQoJCQkJCX0NCgkJCQl9KTsNCgkNCgkJCQlmb3IodmFyIGkgPSAwOyBpIDwgcmNvdW50OyBpKyspIHsNCgkJCQkJcmVzdWx0ICs9ICc8L3NwYW4+JzsNCgkJCQl9DQoJDQoJCQkJcmV0dXJuIHJlc3VsdDsNCgkJCX0NCgkJfQ0KCTwvc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPmApOw0KfQ0KDQpfLm9wZW5UZXh0RWRpdG9yV2luZG93ID0gZnVuY3Rpb24ocCkgew0KCW53LldpbmRvdy5vcGVuKF8uZmlsZVBhdGgsIHsNCgkJdGl0bGU6ICJTdXBlciBNZXNzYWdlIEVkaXRvciIsDQoJCWljb246IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAiaWNvbi5wbmciKSwNCgkJcmVzaXphYmxlOiBmYWxzZSwNCgkJd2lkdGg6IDYyNywNCgkJaGVpZ2h0OiA0MDANCgl9LCBmdW5jdGlvbihuZXdXaW4pIHsNCgkJbmV3V2luLndpbmRvdy5fbW9kaWZpZXIgPSBwOw0KCQluZXdXaW4ub24oJ2Nsb3NlJywgZnVuY3Rpb24oKSB7DQoJCQluZXdXaW4ud2luZG93LnByZXBhcmVUb0Nsb3NlKCk7DQoJCQluZXdXaW4uY2xvc2UodHJ1ZSk7DQoJCX0pOw0KCQl2YXIgcHJlc3N1cmUgPSAwOw0KCQl2YXIgcmVmcmVzaCA9IGZ1bmN0aW9uKCkgew0KCQkJaWYobmV3V2luLndpbmRvdy5hdHRlbXB0UmVmcmVzaCkgew0KCQkJCW5ld1dpbi53aW5kb3cuYXR0ZW1wdFJlZnJlc2goKTsNCgkJCX0gZWxzZSB7DQoJCQkJaWYocHJlc3N1cmUrKyA+IDEwKSB7DQoJCQkJCWNvbnNvbGUubG9nKCJDb3VsZCBub3QgcmVsb2FkIG1lc3NhZ2UhIDooIik7DQoJCQkJCW5ld1dpbi5jbG9zZSh0cnVlKTsNCgkJCQl9IGVsc2Ugew0KCQkJCQlzZXRUaW1lb3V0KHJlZnJlc2gsIDUwMCk7DQoJCQkJfQ0KCQkJfQ0KCQl9Ow0KCQlzZXRUaW1lb3V0KHJlZnJlc2gsIDUwMCk7DQoJfSk7DQp9DQoNCn0pKFNSRC5TdXBlck1lc3NhZ2VFZGl0b3IpOw=="
    }
}